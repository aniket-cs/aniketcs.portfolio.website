import{d as b,f as U}from"https://app.framerstatic.com/chunk-3V6H2SO6.mjs";import{a as c,b as P}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{a as A}from"https://app.framerstatic.com/chunk-DFNFZLDR.mjs";import{j as p}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";function w(s){return typeof s=="string"}function g(s){return Number.isFinite(s)}function h(s,e,t){let r=A(),n=new URL(`${r.userContent}/images/${s}`);return g(e)&&n.searchParams.set("scale-down-to",`${e}`),t==="lossless"&&n.searchParams.set("lossless","1"),n.toString()}function u(s){return`${A().userContent}/assets/${s}`}function C(s){let e=A(),t=new URL(s);if(t.origin!==e.userContent)return;let[,r,n,...i]=t.pathname.split("/");if(!(r!=="images"&&r!=="assets")&&!(n===void 0||n===""||i.length>0))return{filename:n,searchParams:t.searchParams}}var N={auto:!0,lossless:!0,small:!0,medium:!0,large:!0,full:!0};function F(s){return w(s)&&s in N}var y="framer/asset-reference,";function L(s){return s.startsWith(`data:${y}`)}var E="originalFilename",M="packageIdentifier",I="preferredSize",k="presetName";function d(s,e=null,t=null,r=null,n=null){c(s!=="","Can\u2019t create asset reference for empty identifier");let i=new URL(`data:${y}${s}`);return t&&i.searchParams.set(E,t),e&&i.searchParams.set(M,e),r&&i.searchParams.set(I,r),n&&i.searchParams.set(k,n),i.href}function m(s){if(L(s))try{let e=new URL(s),t=e.pathname.substring(y.length),r=e.searchParams.get(E),n=e.searchParams.get(M),i=e.searchParams.get(I),o=e.searchParams.get(k);return{identifier:t,originalFilename:r,packageIdentifier:n,preferredSize:F(i)?i:void 0,presetName:o,fileExtension:r&&D(r)}}catch{return}}function D(s){return s.split(".").pop()??""}var R=class{constructor(e){this.api=e;p(this,"assetUpdatesEmitter",new U);p(this,"currentAssets",[]);p(this,"assetUpdatesStream",this.assetUpdatesEmitter.newStream);p(this,"uploadAsset",async e=>{if(!this.api.uploadAsset)throw Error("Asset service is read only");let t=await this.api.uploadAsset(e);return await this.refresh(),t});p(this,"duplicateAssets",async(e,t)=>{if(!this.api.duplicateAssets)throw Error("Asset service is read only");let r=await this.api.duplicateAssets(e,t);this.addAssets(r)});this.assetUpdatesEmitter.emit({})}async refresh(){let e=await this.api.getAssets();this.update(e.assets)}update(e){this.currentAssets=e,this.assetUpdatesEmitter.emit({assets:this.currentAssets})}addAssets(e){this.update([...this.currentAssets,...e])}getAssetByFilename(e){return this.currentAssets.find(t=>t.filename===e)}};var K=/^(.*?)(?:([^/])\.([^/.]+))?$/;function x(s){let e=s.match(K);return e?[e[1]+(e[2]??""),e[3]??""]:[s,""]}function V(s,e){switch(s){case"small":return 512;case"medium":return 1024;case"large":return 2048;case"full":return;case"lossless":case"auto":case void 0:return g(e)?e:void 0;default:P(s)}}var H=[512,1024,2048,4096];function S(s,e){if(s===void 0||e===void 0)return;let t=s,r=e,n=0;e>s&&(t=e,r=s,n=1);let i=t/r,o=[];for(let a of H){if(t<=a)return o;o.push({maxSideSize:a,width:n===0?a:Math.trunc(a/i)})}return o}function l(s,e,t,r){let n,i=s?.properties?.image,o=V(e,t);o!==void 0&&i&&(r??=S(i.width,i.height),r&&(n=r.find(({maxSideSize:f})=>f>=o)));let a=n?.maxSideSize;return{maxSideSize:a,width:n?.width,url:h(s.filename,a,e)}}var v=class{constructor(){p(this,"assets",new Map);p(this,"_hash",0)}get hash(){return this._hash}patch(e){for(let t of e)this.assets.set(t.key,t);this._hash++}set(e){this.assets.clear(),this.patch(e)}items(){return Array.from(this.assets.values())}urlForKey(e,t,r){let n=this.assetForKey(e);if(n)return n.properties?.kind!=="image"?u(n.filename):l(n,t,r)?.url}assetForKey(e){let[t]=x(e),r=this.assets.get(t);if(r)return r;for(let n of this.assets.values())if(n.name===e)return n}};var _=/^node_modules\/(@[^/]+\/[^/]+|[^/]+)\/(.*)/;function $(s,e,t){return`${s}/packages/${e}/latest/${t}`}function j(s,e){let t=e.replace(/%40/gu,"@"),r=_.exec(t);if(r&&r[1]&&r[2]){let n=r[1],i=r[2];c(n,"did not match packageName"),c(i,"did not match filePath");let o=$(s,n,i);if(o)return o}return t}function T(s,e){return(r,n)=>{if(!r)return;let i=!1,o=m(r);if(o){let{identifier:f,packageIdentifier:z}=o;if(z)return $(s,z,f);i=!0,r=f}else if(n?.isFramerResourceURL)return j(s,r);let a=e.assetForKey(r);if(a){if(a.properties?.kind==="image"){let f=n?.preferredSize??o?.preferredSize;return l(a,f,n?.pixelSize).url}return u(a.filename)}if(i)return u(r)}}function W(s,e){Promise.resolve(s).then(t=>t.assetUpdatesStream({replay:"latest"}).read(e)).catch(b)}function B(s,e){let t=s?m(s):void 0;return t?d(t.identifier,t.packageIdentifier,t.originalFilename,e):d(s,null,null,e)}export{w as a,g as b,h as c,u as d,C as e,R as f,x as g,S as h,l as i,v as j,L as k,d as l,m,T as n,W as o,B as p};
//# sourceMappingURL=https://app.framerstatic.com/chunk-WWAVD2AM.mjs.map
